<% content_for :page_title do %>
  <%= link_to @user.email, spree.edit_admin_user_url(@user) %> /
  <%= Spree.t('avalara_entity_use_codes') %>
<% end %>

<%= render partial: 'spree/admin/users/sidebar', locals: { current: :avalara_informtion } %>

<fieldset data-hook="admin_user_edit_general_settings" class="alpha twelve columns">
  <div data-hook="admin_user_edit_form_header">
    <%= render partial: 'spree/shared/error_messages', locals: { target: @user } %>
  </div>

  <div data-hook="admin_user_edit_form">
    <%= form_for [:admin, @user], method: :put do |f| %>
      <% use_codes_list = SpreeAvataxOfficial::EntityUseCode.all.map {|use_code| ["#{use_code.code} #{use_code.description}", use_code.id]} %>
      <div class="form-group">
        <%= label_tag :spree_avatax_official_entity_use_codes_id, Spree.t(:avalara_entity_use_code) %><br />
        <%= f.select(:spree_avatax_official_entity_use_codes_id, use_codes_list, { include_blank: false }, class: 'form-control'  ) %>
      </div>

      <div class="form-group">
        <%= f.label :exemption_number, Spree.t(:exemption_number) %>
        <%= f.text_field :exemption_number, class: 'form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :vat_id, Spree.t(:vat_identification_number) %>
        <%= f.text_field :vat_id, :class => 'form-control' %>
      </div>

      <div class="form-group">
        <% if can?(:update, @user) %>
          <div data-hook="admin_user_edit_form_button">
            <%= render partial: 'spree/admin/shared/edit_resource_links', locals: { collection_url: admin_users_url } %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</fieldset>
